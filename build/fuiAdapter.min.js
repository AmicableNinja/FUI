// fuiAdapter.js - http://github.com/AmicableNinja/fuiAdapter.js
'use strict';var FUI=FUI||{revision:1};FUI.TYPE_POINTER=1;FUI.TYPE_BUTTON=2;FUI.EVENT_UP=1;FUI.EVENT_DOWN=2;FUI.EVENT_STILL_DOWN=4;FUI.EVENT_MOVE=8;FUI.EVENT_DOWN_ALREADY=FUI.EVENT_STILL_DOWN;FUI.MASK_ALL=4294967295;FUI.MASK_BUTTON=131071;FUI.MASK_BUTTON_EXTENDED=65536;FUI.MASK_BUTTON_POINTER=126976;FUI.MASK_LOCATION=917504;FUI.MASK_SOURCE=15728640;FUI.MASK_EVENT=251658240;FUI.POINTER_SOURCE_MOUSE=1048576;FUI.POINTER_SOURCE_PEN=2097152;FUI.POINTER_SOURCE_ERASER=3145728;FUI.POINTER_SOURCE_CURSOR=4194304;
FUI.POINTER_SOURCE_TOUCH=5242880;FUI.POINTER_SOURCE_KEYBOARD=6291456;FUI.POINTER_SOURCE_UNKNOWN=7340032;FUI.BUTTON_LOCATION_ALL=0;FUI.BUTTON_LOCATION_STANDARD=131072;FUI.BUTTON_LOCATION_LEFT=262144;FUI.BUTTON_LOCATION_RIGHT=393216;FUI.BUTTON_LOCATION_NUMPAD=524288;FUI.BUTTON_LOCATION_MOBILE=655360;FUI.BUTTON_LOCATION_JOYSTICK=917504;FUI.BUTTON_BACKSPACE=8;FUI.BUTTON_TAB=9;FUI.BUTTON_ENTER=13;FUI.BUTTON_SHIFT=15;FUI.BUTTON_CONTROL=17;FUI.BUTTON_ALT=18;FUI.BUTTON_ESCAPE=27;FUI.BUTTON_SPACE=32;
FUI.BUTTON_APOSTROPHE=39;FUI.BUTTON_ASTERISK=42;FUI.BUTTON_PLUS_SIGN=43;FUI.BUTTON_COMMA=44;FUI.BUTTON_HYPHEN_MINUS=45;FUI.BUTTON_FULL_STOP=46;FUI.BUTTON_PERIOD=FUI.BUTTON_FULL_STOP;FUI.BUTTON_SOLIDUS=47;FUI.BUTTON_SLASH=FUI.BUTTON_FORWARD_SLASH=FUI.BUTTON_SOLIDUS;FUI.BUTTON_DIGIT_ZERO=48;FUI.BUTTON_DIGIT_ONE=49;FUI.BUTTON_DIGIT_TWO=50;FUI.BUTTON_DIGIT_THREE=51;FUI.BUTTON_DIGIT_FOUR=52;FUI.BUTTON_DIGIT_FIVE=53;FUI.BUTTON_DIGIT_SIX=54;FUI.BUTTON_DIGIT_SEVEN=55;FUI.BUTTON_DIGIT_EIGHT=56;
FUI.BUTTON_DIGIT_NINE=57;FUI.BUTTON_0=FUI.BUTTON_DIGIT_ZERO;FUI.BUTTON_1=FUI.BUTTON_DIGIT_ONE;FUI.BUTTON_2=FUI.BUTTON_DIGIT_TWO;FUI.BUTTON_3=FUI.BUTTON_DIGIT_THREE;FUI.BUTTON_4=FUI.BUTTON_DIGIT_FOUR;FUI.BUTTON_5=FUI.BUTTON_DIGIT_FIVE;FUI.BUTTON_6=FUI.BUTTON_DIGIT_SIX;FUI.BUTTON_7=FUI.BUTTON_DIGIT_SEVEN;FUI.BUTTON_8=FUI.BUTTON_DIGIT_EIGHT;FUI.BUTTON_9=FUI.BUTTON_DIGIT_NINE;FUI.BUTTON_SEMICOLON=59;FUI.BUTTON_EQUALS_SIGN=61;FUI.BUTTON_EQUALS=FUI.BUTTON_EQUALS_SIGN;FUI.BUTTON_LATIN_CAPITAL_LETTER_A=65;
FUI.BUTTON_LATIN_CAPITAL_LETTER_B=66;FUI.BUTTON_LATIN_CAPITAL_LETTER_C=67;FUI.BUTTON_LATIN_CAPITAL_LETTER_D=68;FUI.BUTTON_LATIN_CAPITAL_LETTER_E=69;FUI.BUTTON_LATIN_CAPITAL_LETTER_F=70;FUI.BUTTON_LATIN_CAPITAL_LETTER_G=71;FUI.BUTTON_LATIN_CAPITAL_LETTER_H=72;FUI.BUTTON_LATIN_CAPITAL_LETTER_I=73;FUI.BUTTON_LATIN_CAPITAL_LETTER_J=74;FUI.BUTTON_LATIN_CAPITAL_LETTER_K=75;FUI.BUTTON_LATIN_CAPITAL_LETTER_L=76;FUI.BUTTON_LATIN_CAPITAL_LETTER_M=77;FUI.BUTTON_LATIN_CAPITAL_LETTER_N=78;
FUI.BUTTON_LATIN_CAPITAL_LETTER_O=79;FUI.BUTTON_LATIN_CAPITAL_LETTER_P=80;FUI.BUTTON_LATIN_CAPITAL_LETTER_Q=81;FUI.BUTTON_LATIN_CAPITAL_LETTER_R=82;FUI.BUTTON_LATIN_CAPITAL_LETTER_S=83;FUI.BUTTON_LATIN_CAPITAL_LETTER_T=84;FUI.BUTTON_LATIN_CAPITAL_LETTER_U=85;FUI.BUTTON_LATIN_CAPITAL_LETTER_V=86;FUI.BUTTON_LATIN_CAPITAL_LETTER_W=87;FUI.BUTTON_LATIN_CAPITAL_LETTER_X=88;FUI.BUTTON_LATIN_CAPITAL_LETTER_Y=89;FUI.BUTTON_LATIN_CAPITAL_LETTER_Z=90;FUI.BUTTON_A=FUI.BUTTON_LATIN_CAPITAL_LETTER_A;
FUI.BUTTON_B=FUI.BUTTON_LATIN_CAPITAL_LETTER_B;FUI.BUTTON_C=FUI.BUTTON_LATIN_CAPITAL_LETTER_C;FUI.BUTTON_D=FUI.BUTTON_LATIN_CAPITAL_LETTER_D;FUI.BUTTON_E=FUI.BUTTON_LATIN_CAPITAL_LETTER_E;FUI.BUTTON_F=FUI.BUTTON_LATIN_CAPITAL_LETTER_F;FUI.BUTTON_G=FUI.BUTTON_LATIN_CAPITAL_LETTER_G;FUI.BUTTON_H=FUI.BUTTON_LATIN_CAPITAL_LETTER_H;FUI.BUTTON_I=FUI.BUTTON_LATIN_CAPITAL_LETTER_I;FUI.BUTTON_J=FUI.BUTTON_LATIN_CAPITAL_LETTER_J;FUI.BUTTON_K=FUI.BUTTON_LATIN_CAPITAL_LETTER_K;FUI.BUTTON_L=FUI.BUTTON_LATIN_CAPITAL_LETTER_L;
FUI.BUTTON_M=FUI.BUTTON_LATIN_CAPITAL_LETTER_M;FUI.BUTTON_N=FUI.BUTTON_LATIN_CAPITAL_LETTER_N;FUI.BUTTON_O=FUI.BUTTON_LATIN_CAPITAL_LETTER_O;FUI.BUTTON_P=FUI.BUTTON_LATIN_CAPITAL_LETTER_P;FUI.BUTTON_Q=FUI.BUTTON_LATIN_CAPITAL_LETTER_Q;FUI.BUTTON_R=FUI.BUTTON_LATIN_CAPITAL_LETTER_R;FUI.BUTTON_S=FUI.BUTTON_LATIN_CAPITAL_LETTER_S;FUI.BUTTON_T=FUI.BUTTON_LATIN_CAPITAL_LETTER_T;FUI.BUTTON_U=FUI.BUTTON_LATIN_CAPITAL_LETTER_U;FUI.BUTTON_V=FUI.BUTTON_LATIN_CAPITAL_LETTER_V;FUI.BUTTON_W=FUI.BUTTON_LATIN_CAPITAL_LETTER_W;
FUI.BUTTON_X=FUI.BUTTON_LATIN_CAPITAL_LETTER_X;FUI.BUTTON_Y=FUI.BUTTON_LATIN_CAPITAL_LETTER_Y;FUI.BUTTON_Z=FUI.BUTTON_LATIN_CAPITAL_LETTER_Z;FUI.BUTTON_LEFT_SQUARE_BRACKET=91;FUI.BUTTON_REVERSE_SOLIDUS=92;FUI.BUTTON_BACKSLASH=FUI.BUTTON_REVERSE_SOLIDUS;FUI.BUTTON_RIGHT_SQUARE_BRACKET=93;FUI.BUTTON_GRAVE_ACCENT=96;FUI.BUTTON_DELETE=127;FUI.BUTTON_BLACK_DIAMOND=9670;FUI.BUTTON_META=FUI.BUTTON_BLACK_DIAMOND;FUI.BUTTON_F1=65537;FUI.BUTTON_F2=65538;FUI.BUTTON_F3=65539;FUI.BUTTON_F4=65540;
FUI.BUTTON_F5=65541;FUI.BUTTON_F6=65542;FUI.BUTTON_F7=65543;FUI.BUTTON_F8=65544;FUI.BUTTON_F9=65545;FUI.BUTTON_F10=65546;FUI.BUTTON_F11=65547;FUI.BUTTON_F12=65548;FUI.BUTTON_F13=65549;FUI.BUTTON_F14=65550;FUI.BUTTON_F15=65551;FUI.BUTTON_F16=65552;FUI.BUTTON_F17=65553;FUI.BUTTON_F18=65554;FUI.BUTTON_F19=65555;FUI.BUTTON_F20=65556;FUI.BUTTON_F21=65557;FUI.BUTTON_F22=65558;FUI.BUTTON_F23=65559;FUI.BUTTON_F24=65560;FUI.BUTTON_PAUSE_BREAK=65561;FUI.BUTTON_CAPS_LOCK=65562;FUI.BUTTON_PAGE_UP=65563;
FUI.BUTTON_PAGE_DOWN=65564;FUI.BUTTON_END=65565;FUI.BUTTON_HOME=65566;FUI.BUTTON_ARROW_LEFT=65567;FUI.BUTTON_ARROW_UP=65568;FUI.BUTTON_ARROW_RIGHT=65569;FUI.BUTTON_ARROW_DOWN=65570;FUI.BUTTON_PRINT_SCREEN=65571;FUI.BUTTON_INSERT=65572;FUI.BUTTON_OS=65574;FUI.BUTTON_CONTEXT_MENU=65575;FUI.BUTTON_NUMBER_LOCK=65576;FUI.BUTTON_SCROLL_LOCK=65577;FUI.BUTTON_HELP=65578;FUI.BUTTON_SELECT=65579;FUI.BUTTON_EXECUTE=65580;FUI.BUTTON_CLEAR=65581;FUI.BUTTON_SEPARATOR=65582;FUI.BUTTON_POINTER_=126976;
FUI.BUTTON_POINTER_LEFT=126977;FUI.BUTTON_POINTER_RIGHT=126978;FUI.BUTTON_POINTER_MIDDLE=126979;FUI.BUTTON_POINTER_AUX_A=126980;FUI.BUTTON_POINTER_AUX_B=126981;FUI.BUTTON_NUMPAD_0=FUI.BUTTON_LOCATION_NUMPAD|FUI.BUTTON_0;FUI.BUTTON_NUMPAD_1=FUI.BUTTON_LOCATION_NUMPAD|FUI.BUTTON_1;FUI.BUTTON_NUMPAD_2=FUI.BUTTON_LOCATION_NUMPAD|FUI.BUTTON_2;FUI.BUTTON_NUMPAD_3=FUI.BUTTON_LOCATION_NUMPAD|FUI.BUTTON_3;FUI.BUTTON_NUMPAD_4=FUI.BUTTON_LOCATION_NUMPAD|FUI.BUTTON_4;
FUI.BUTTON_NUMPAD_5=FUI.BUTTON_LOCATION_NUMPAD|FUI.BUTTON_5;FUI.BUTTON_NUMPAD_6=FUI.BUTTON_LOCATION_NUMPAD|FUI.BUTTON_6;FUI.BUTTON_NUMPAD_7=FUI.BUTTON_LOCATION_NUMPAD|FUI.BUTTON_7;FUI.BUTTON_NUMPAD_8=FUI.BUTTON_LOCATION_NUMPAD|FUI.BUTTON_8;FUI.BUTTON_NUMPAD_9=FUI.BUTTON_LOCATION_NUMPAD|FUI.BUTTON_9;FUI.BUTTON_NUMPAD_ADD=FUI.BUTTON_LOCATION_NUMPAD|FUI.BUTTON_PLUS_SIGN;FUI.BUTTON_NUMPAD_SUBTRACT=FUI.BUTTON_LOCATION_NUMPAD|FUI.BUTTON_HYPHEN_MINUS;
FUI.BUTTON_NUMPAD_MULTIPLY=FUI.BUTTON_LOCATION_NUMPAD|FUI.BUTTON_ASTERISK;FUI.BUTTON_NUMPAD_DIVIDE=FUI.BUTTON_LOCATION_NUMPAD|FUI.BUTTON_SOLIDUS;FUI.BUTTON_NUMPAD_SEPARATOR=FUI.BUTTON_LOCATION_NUMPAD|FUI.BUTTON_SEPARATOR;FUI.BUTTON_NUMPAD_FULL_STOP=FUI.BUTTON_NUMPAD_PERIOD=FUI.BUTTON_NUMPAD_COMMA=FUI.BUTTON_NUMPAD_SEPARATOR;var DEBUG=!0;window.console=window.console||{info:function(){},log:function(){},debug:function(){},warn:function(){},error:function(){}};FUI.debug={level:10};FUI.debug.log=function(a,b){var c=b||{};FUI.debug.level<=(a||10)&&window.console.log(c)};FUI.debug.error=function(a,b){var c=b||{};FUI.debug.level<=(a||10)&&window.console.error(c)};FUI.gesture=function(){this.conditions=[];this.__currentCondition_index=this.__currentCondition=!1;return this};FUI.gesture.prototype.__startNewCondition=function(){this.__currentCondition_index=this.conditions.push(this.__currentCondition={});this.__currentCondition_index-=1;DEBUG&&FUI.debug.log(10,["currentCndition index",this.__currentCondition_index])};
FUI.gesture.prototype.__addToCurrentCondition=function(a){this.__currentCondition||this.__startNewCondition();if(a.button||a.pointer)this.__currentCondition=this.conditions[this.__currentCondition_index];for(var b in a)this.__currentCondition[b]=a[b]};FUI.gesture.prototype.pointer=function(a){this.__addToCurrentCondition({pointer:{which:a||"all"}});this.__currentCondition=this.__currentCondition.pointer;return this};
FUI.gesture.prototype.button=function(a){this.__addToCurrentCondition({button:{which:a}});this.__currentCondition=this.__currentCondition.button;return this};FUI.gesture.prototype.down=function(){this.__addToCurrentCondition({down:!0});return this};FUI.gesture.prototype.up=function(){this.__addToCurrentCondition({up:!0});return this};FUI.gesture.prototype.stillDown=function(){this.__addToCurrentCondition({stillDown:!0});return this};
FUI.gesture.prototype.move=function(){this.__addToCurrentCondition({move:!0});return this};FUI.gesture.prototype.and=function(){this.__currentCondition=this.conditions[this.__currentCondition_index];return this};FUI.gesture.prototype.or=function(){this.__startNewCondition();return this};FUI.gesture.prototype.givenState=function(){return!1};var otherNotation={and:[{and:[],or:[]},{and:[],or:[]}],or:[]};FUI.sbool=function(a,b){this.ors=a||[];this.ands=b||[]};
FUI.sbool.prototype.evaluate=function(a){var b=!1,c;for(c in this.ors)if(b=FUI.sbool.prototype.evaluate_var(this.ors[c],a)||b,DEBUG&&FUI.debug.log(10,["ors",this.ors[c],"isTrue",b,"on n",c]),b)return!0;if(1>this.ands.length)return DEBUG&&FUI.debug.log(10,["no ands to test",b,this.ands.length]),b;b=!0;for(c in this.ands)if(b=FUI.sbool.prototype.evaluate_var(this.ands[c],a)&&b,DEBUG&&FUI.debug.log(10,["ands",this.ands[c],"isTrue",b,"on n",c]),!b)break;return b};
FUI.sbool.prototype.evaluate_var=function(a,b){switch(typeof a){case "object":if(a.evaluate)return a.evaluate(b);FUI.debug.error(10,["unknown object type",a]);break;case "undefined":break;case "boolean":return a;case "function":return a.apply(b);default:FUI.debug.error(10,["not implemented yet",a])}return!1};
var otherNotation_imp=new FUI.sbool([1,6],[2,5,new FUI.sbool([3,4])]),otherNotation_impBool=new FUI.sbool([!1,!1],[!0,!0,new FUI.sbool([!1,!0])]),otherNotation_impBool_small=new FUI.sbool([!1,!0]);FUI.gbool=FUI.sbool;FUI.gbool.prototype=FUI.sbool.prototype;
FUI.gbool.prototype.evaluate=function(a){DEBUG&&FUI.debug.log(4,["gbool, data in:",a]);var b=!1,c;for(c in this.ors)if(b=b||FUI.sbool.prototype.evaluate_var(this.ors[c],a),DEBUG&&FUI.debug.log(3,["ors",this.ors[c],"isTrue",b,"on n",c]),b){DEBUG&&FUI.debug.log(3,["gbool, at least one or found true, breaking"]);break}if(1>this.ands.length)return DEBUG&&FUI.debug.log(3,["no ands to test",b,this.ands.length]),b;for(c in this.ands)if(b=b&&FUI.sbool.prototype.evaluate_var(this.ands[c],a),DEBUG&&FUI.debug.log(3,
["ands",this.ands[c],"isTrue",b,"on n",c]),!b)return DEBUG&&FUI.debug.log(3,["gbool, !isTrue, ret",b]),b;DEBUG&&FUI.debug.log(4,["gbool, final return",b]);return b};
FUI.gbool.prototype.evaluate_var=function(a,b){switch(typeof a){case "object":if(a.evaluate)return a.evaluate(b);FUI.debug.error(10,["unknown object type",a]);break;case "undefined":break;case "boolean":return a;case "function":return a.apply(b);case "number":if((a&FUI.MASK_BUTTON_POINTER)==FUI.MASK_BUTTON_POINTER){var c=b.pointers.mouse?b.pointers.mouse[a]:!1;DEBUG&&FUI.debug.log(3,["gbool mouse",a,b.pointers.mouse?b.pointers.mouse[a]:"undefined data.pointers.mouse :(",c])}else c=void 0!=b.buttons[a]?
void 0!=b.buttons[a].down?b.buttons[a].down:b.buttons[a]:!1,DEBUG&&FUI.debug.log(3,["gbool buttons",a,b.buttons[a],c]);return c;default:FUI.debug.error(10,["not implemented yet",a,b])}return!1};FUI.driver={};
FUI.driver.physicalKeys={BUTTON_LBUTTON:1,BUTTON_RBUTTON:2,BUTTON_CANCEL:3,BUTTON_MBUTTON:4,BUTTON_XBUTTON1:5,BUTTON_XBUTTON2:6,BUTTON_BACK:8,BUTTON_TAB:9,BUTTON_CLEAR:12,BUTTON_RETURN:13,BUTTON_SHIFT:16,BUTTON_CONTROL:17,BUTTON_MENU:18,BUTTON_PAUSE:19,BUTTON_CAPITAL:20,BUTTON_KANA:21,BUTTON_HANGUEL:21,BUTTON_HANGUL:21,BUTTON_JUNJA:23,BUTTON_FINAL:24,BUTTON_HANJA:25,BUTTON_KANJI:25,BUTTON_ESCAPE:27,BUTTON_CONVERT:28,BUTTON_NONCONVERT:29,BUTTON_ACCEPT:30,BUTTON_MODECHANGE:31,BUTTON_SPACE:32,BUTTON_PRIOR:33,
BUTTON_NEXT:34,BUTTON_END:35,BUTTON_HOME:36,BUTTON_LEFT:37,BUTTON_UP:38,BUTTON_RIGHT:39,BUTTON_DOWN:40,BUTTON_SELECT:41,BUTTON_PRINT:42,BUTTON_EXECUTE:43,BUTTON_SNAPSHOT:44,BUTTON_INSERT:45,BUTTON_DELETE:46,BUTTON_HELP:47,BUTTON_0:48,BUTTON_1:49,BUTTON_2:50,BUTTON_3:51,BUTTON_4:52,BUTTON_5:53,BUTTON_6:54,BUTTON_7:55,BUTTON_8:56,BUTTON_9:57,BUTTON_A:65,BUTTON_B:66,BUTTON_C:67,BUTTON_D:68,BUTTON_E:69,BUTTON_F:70,BUTTON_G:71,BUTTON_H:72,BUTTON_I:73,BUTTON_J:74,BUTTON_K:75,BUTTON_L:76,BUTTON_M:77,BUTTON_N:78,
BUTTON_O:79,BUTTON_P:80,BUTTON_Q:81,BUTTON_R:82,BUTTON_S:83,BUTTON_T:84,BUTTON_U:85,BUTTON_V:86,BUTTON_W:87,BUTTON_X:88,BUTTON_Y:89,BUTTON_Z:90,BUTTON_OS_LEFT:91,BUTTON_OS_RIGHT:92,BUTTON_APPS:93,BUTTON_SLEEP:95,BUTTON_NUMPAD0:96,BUTTON_NUMPAD1:97,BUTTON_NUMPAD2:98,BUTTON_NUMPAD3:99,BUTTON_NUMPAD4:100,BUTTON_NUMPAD5:101,BUTTON_NUMPAD6:102,BUTTON_NUMPAD7:103,BUTTON_NUMPAD8:104,BUTTON_NUMPAD9:105,BUTTON_MULTIPLY:106,BUTTON_ADD:107,BUTTON_SEPARATOR:108,BUTTON_SUBTRACT:109,BUTTON_DECIMAL:110,BUTTON_DIVIDE:111,
BUTTON_F1:112,BUTTON_F2:113,BUTTON_F3:114,BUTTON_F4:115,BUTTON_F5:116,BUTTON_F6:117,BUTTON_F7:118,BUTTON_F8:119,BUTTON_F9:120,BUTTON_F10:121,BUTTON_F11:122,BUTTON_F12:123,BUTTON_F13:124,BUTTON_F14:125,BUTTON_F15:126,BUTTON_F16:127,BUTTON_F17:128,BUTTON_F18:129,BUTTON_F19:130,BUTTON_F20:131,BUTTON_F21:132,BUTTON_F22:133,BUTTON_F23:134,BUTTON_F24:135,BUTTON_NUMLOCK:144,BUTTON_SCROLL:145,BUTTON_LSHIFT:160,BUTTON_RSHIFT:161,BUTTON_LCONTROL:162,BUTTON_RCONTROL:163,BUTTON_LMENU:164,BUTTON_RMENU:165,BUTTON_BROWSER_BACK:166,
BUTTON_BROWSER_FORWARD:167,BUTTON_BROWSER_REFRESH:168,BUTTON_BROWSER_STOP:169,BUTTON_BROWSER_SEARCH:170,BUTTON_BROWSER_FAVORITES:171,BUTTON_BROWSER_HOME:172,BUTTON_VOLUME_MUTE:173,BUTTON_VOLUME_DOWN:174,BUTTON_VOLUME_UP:175,BUTTON_MEDIA_NEXT_TRACK:176,BUTTON_MEDIA_PREV_TRACK:177,BUTTON_MEDIA_STOP:178,BUTTON_MEDIA_PLAY_PAUSE:179,BUTTON_LAUNCH_MAIL:180,BUTTON_LAUNCH_MEDIA_SELECT:181,BUTTON_LAUNCH_APP1:182,BUTTON_LAUNCH_APP2:183,BUTTON_OEM_1:186,BUTTON_OEM_PLUS:187,BUTTON_OEM_COMMA:188,BUTTON_OEM_MINUS:189,
BUTTON_OEM_PERIOD:190,BUTTON_OEM_2:191,BUTTON_OEM_3:192,BUTTON_OEM_4:219,BUTTON_OEM_5:220,BUTTON_OEM_6:221,BUTTON_OEM_7:222,BUTTON_OEM_8:223,BUTTON_OEM_102:226,BUTTON_PROCESSKEY:229,BUTTON_ATTN:246,BUTTON_CRSEL:247,BUTTON_EXSEL:248,BUTTON_EREOF:249,BUTTON_PLAY:250,BUTTON_ZOOM:251,BUTTON_NONAME:252,BUTTON_PA1:253,BUTTON_OEM_CLEAR:254};FUI.drivers={browser:{},keyboard:{}};FUI.driver.keyboard=function(){};FUI.driver.keyboard.prototype={constructor:FUI.driver.keyboard,buttonTable:{}};FUI.drivers.keyboard.defaultDriver=new FUI.driver.keyboard;FUI.uRep=function(a,b){if(!a)return!1;var c="0000"+a.toString(16),c="U+"+c.substring(c.length-4);return b?c.toLowerCase():c};if(__t1)window.__t_ORIG=__t1,__t1=void 0;if(__t2)window.__2_ORIG=__t2,__t2=void 0;var __t1=FUI.driver.keyboard.prototype.buttonTable,__t2=FUI.driver.physicalKeys;__t1[__t2.BUTTON_CANCEL]=[FUI.BUTTON_PAUSE_BREAK];
__t1[__t2.BUTTON_BACK]=[FUI.BUTTON_BACKSPACE];__t1[__t2.BUTTON_TAB]=[FUI.BUTTON_TAB];__t1[__t2.BUTTON_CLEAR]=[FUI.BUTTON_CLEAR];__t1[__t2.BUTTON_RETURN]=[FUI.BUTTON_ENTER];__t1[__t2.BUTTON_SHIFT]=[FUI.BUTTON_SHIFT];__t1[__t2.BUTTON_CONTROL]=[FUI.BUTTON_CONTROL];__t1[__t2.BUTTON_MENU]=[FUI.BUTTON_CONTEXT_MENU];__t1[__t2.BUTTON_PAUSE]=[FUI.BUTTON_PAUSE_BREAK];__t1[__t2.BUTTON_CAPITAL]=[FUI.BUTTON_CAPS_LOCK];__t1[__t2.BUTTON_ESCAPE]=[FUI.BUTTON_ESCAPE];__t1[__t2.BUTTON_SPACE]=[FUI.BUTTON_SPACE];
__t1[__t2.BUTTON_PRIOR]=[FUI.BUTTON_PAGE_UP];__t1[__t2.BUTTON_NEXT]=[FUI.BUTTON_PAGE_DOWN];__t1[__t2.BUTTON_END]=[FUI.BUTTON_END];__t1[__t2.BUTTON_HOME]=[FUI.BUTTON_HOME];__t1[__t2.BUTTON_LEFT]=[FUI.BUTTON_ARROW_LEFT];__t1[__t2.BUTTON_UP]=[FUI.BUTTON_ARROW_UP];__t1[__t2.BUTTON_RIGHT]=[FUI.BUTTON_ARROW_RIGHT];__t1[__t2.BUTTON_DOWN]=[FUI.BUTTON_ARROW_DOWN];__t1[__t2.BUTTON_SELECT]=[FUI.BUTTON_SELECT];__t1[__t2.BUTTON_EXECUTE]=[FUI.BUTTON_EXECUTE];__t1[__t2.BUTTON_SNAPSHOT]=[FUI.BUTTON_PRINT_SCREEN];
__t1[__t2.BUTTON_INSERT]=[FUI.BUTTON_INSERT];__t1[__t2.BUTTON_DELETE]=[FUI.BUTTON_DELETE];__t1[__t2.BUTTON_HELP]=[FUI.BUTTON_HELP];__t1[__t2.BUTTON_0]=[FUI.BUTTON_DIGIT_ZERO];__t1[__t2.BUTTON_1]=[FUI.BUTTON_DIGIT_ONE];__t1[__t2.BUTTON_2]=[FUI.BUTTON_DIGIT_TWO];__t1[__t2.BUTTON_3]=[FUI.BUTTON_DIGIT_THREE];__t1[__t2.BUTTON_4]=[FUI.BUTTON_DIGIT_FOUR];__t1[__t2.BUTTON_5]=[FUI.BUTTON_DIGIT_FIVE];__t1[__t2.BUTTON_6]=[FUI.BUTTON_DIGIT_SIX];__t1[__t2.BUTTON_7]=[FUI.BUTTON_DIGIT_SEVEN];
__t1[__t2.BUTTON_8]=[FUI.BUTTON_DIGIT_EIGHT];__t1[__t2.BUTTON_9]=[FUI.BUTTON_DIGIT_NINE];__t1[__t2.BUTTON_A]=[FUI.BUTTON_LATIN_CAPITAL_LETTER_A];__t1[__t2.BUTTON_B]=[FUI.BUTTON_LATIN_CAPITAL_LETTER_B];__t1[__t2.BUTTON_C]=[FUI.BUTTON_LATIN_CAPITAL_LETTER_C];__t1[__t2.BUTTON_D]=[FUI.BUTTON_LATIN_CAPITAL_LETTER_D];__t1[__t2.BUTTON_E]=[FUI.BUTTON_LATIN_CAPITAL_LETTER_E];__t1[__t2.BUTTON_F]=[FUI.BUTTON_LATIN_CAPITAL_LETTER_F];__t1[__t2.BUTTON_G]=[FUI.BUTTON_LATIN_CAPITAL_LETTER_G];
__t1[__t2.BUTTON_H]=[FUI.BUTTON_LATIN_CAPITAL_LETTER_H];__t1[__t2.BUTTON_I]=[FUI.BUTTON_LATIN_CAPITAL_LETTER_I];__t1[__t2.BUTTON_J]=[FUI.BUTTON_LATIN_CAPITAL_LETTER_J];__t1[__t2.BUTTON_K]=[FUI.BUTTON_LATIN_CAPITAL_LETTER_K];__t1[__t2.BUTTON_L]=[FUI.BUTTON_LATIN_CAPITAL_LETTER_L];__t1[__t2.BUTTON_M]=[FUI.BUTTON_LATIN_CAPITAL_LETTER_M];__t1[__t2.BUTTON_N]=[FUI.BUTTON_LATIN_CAPITAL_LETTER_N];__t1[__t2.BUTTON_O]=[FUI.BUTTON_LATIN_CAPITAL_LETTER_O];__t1[__t2.BUTTON_P]=[FUI.BUTTON_LATIN_CAPITAL_LETTER_P];
__t1[__t2.BUTTON_Q]=[FUI.BUTTON_LATIN_CAPITAL_LETTER_Q];__t1[__t2.BUTTON_R]=[FUI.BUTTON_LATIN_CAPITAL_LETTER_R];__t1[__t2.BUTTON_S]=[FUI.BUTTON_LATIN_CAPITAL_LETTER_S];__t1[__t2.BUTTON_T]=[FUI.BUTTON_LATIN_CAPITAL_LETTER_T];__t1[__t2.BUTTON_U]=[FUI.BUTTON_LATIN_CAPITAL_LETTER_U];__t1[__t2.BUTTON_V]=[FUI.BUTTON_LATIN_CAPITAL_LETTER_V];__t1[__t2.BUTTON_W]=[FUI.BUTTON_LATIN_CAPITAL_LETTER_W];__t1[__t2.BUTTON_X]=[FUI.BUTTON_LATIN_CAPITAL_LETTER_X];__t1[__t2.BUTTON_Y]=[FUI.BUTTON_LATIN_CAPITAL_LETTER_Y];
__t1[__t2.BUTTON_Z]=[FUI.BUTTON_LATIN_CAPITAL_LETTER_Z];__t1[__t2.BUTTON_OS_LEFT]=[FUI.BUTTON_OS];__t1[__t2.BUTTON_OS_RIGHT]=[FUI.BUTTON_OS];__t1[__t2.BUTTON_NUMPAD0]=[FUI.BUTTON_NUMPAD_0];__t1[__t2.BUTTON_NUMPAD1]=[FUI.BUTTON_NUMPAD_1];__t1[__t2.BUTTON_NUMPAD2]=[FUI.BUTTON_NUMPAD_2];__t1[__t2.BUTTON_NUMPAD3]=[FUI.BUTTON_NUMPAD_3];__t1[__t2.BUTTON_NUMPAD4]=[FUI.BUTTON_NUMPAD_4];__t1[__t2.BUTTON_NUMPAD5]=[FUI.BUTTON_NUMPAD_5];__t1[__t2.BUTTON_NUMPAD6]=[FUI.BUTTON_NUMPAD_6];
__t1[__t2.BUTTON_NUMPAD7]=[FUI.BUTTON_NUMPAD_7];__t1[__t2.BUTTON_NUMPAD8]=[FUI.BUTTON_NUMPAD_8];__t1[__t2.BUTTON_NUMPAD9]=[FUI.BUTTON_NUMPAD_9];__t1[__t2.BUTTON_MULTIPLY]=[FUI.BUTTON_NUMPAD_MULTIPLY];__t1[__t2.BUTTON_ADD]=[FUI.BUTTON_NUMPAD_ADD];__t1[__t2.BUTTON_SEPARATOR]=[FUI.BUTTON_SEPARATOR];__t1[__t2.BUTTON_SUBTRACT]=[FUI.BUTTON_NUMPAD_SUBTRACT];__t1[__t2.BUTTON_DECIMAL]=[FUI.BUTTON_SEPARATOR];__t1[__t2.BUTTON_DIVIDE]=[FUI.BUTTON_NUMPAD_DIVIDE];__t1[__t2.BUTTON_F1]=[FUI.BUTTON_F1];
__t1[__t2.BUTTON_F2]=[FUI.BUTTON_F2];__t1[__t2.BUTTON_F3]=[FUI.BUTTON_F3];__t1[__t2.BUTTON_F4]=[FUI.BUTTON_F4];__t1[__t2.BUTTON_F5]=[FUI.BUTTON_F5];__t1[__t2.BUTTON_F6]=[FUI.BUTTON_F6];__t1[__t2.BUTTON_F7]=[FUI.BUTTON_F7];__t1[__t2.BUTTON_F8]=[FUI.BUTTON_F8];__t1[__t2.BUTTON_F9]=[FUI.BUTTON_F9];__t1[__t2.BUTTON_F10]=[FUI.BUTTON_F10];__t1[__t2.BUTTON_F11]=[FUI.BUTTON_F11];__t1[__t2.BUTTON_F12]=[FUI.BUTTON_F12];__t1[__t2.BUTTON_F13]=[FUI.BUTTON_F13];__t1[__t2.BUTTON_F14]=[FUI.BUTTON_F14];
__t1[__t2.BUTTON_F15]=[FUI.BUTTON_F15];__t1[__t2.BUTTON_F16]=[FUI.BUTTON_F16];__t1[__t2.BUTTON_F17]=[FUI.BUTTON_F17];__t1[__t2.BUTTON_F18]=[FUI.BUTTON_F18];__t1[__t2.BUTTON_F19]=[FUI.BUTTON_F19];__t1[__t2.BUTTON_F20]=[FUI.BUTTON_F20];__t1[__t2.BUTTON_F21]=[FUI.BUTTON_F21];__t1[__t2.BUTTON_F22]=[FUI.BUTTON_F22];__t1[__t2.BUTTON_F23]=[FUI.BUTTON_F23];__t1[__t2.BUTTON_F24]=[FUI.BUTTON_F24];__t1[__t2.BUTTON_NUMLOCK]=[FUI.BUTTON_NUMBER_LOCK];__t1[__t2.BUTTON_SCROLL]=[FUI.BUTTON_SCROLL_LOCK];
__t1[__t2.BUTTON_LSHIFT]=[FUI.BUTTON_SHIFT];__t1[__t2.BUTTON_RSHIFT]=[FUI.BUTTON_SHIFT];__t1[__t2.BUTTON_LCONTROL]=[FUI.BUTTON_CONTROL];__t1[__t2.BUTTON_RCONTROL]=[FUI.BUTTON_CONTROL];__t1[__t2.BUTTON_LMENU]=[FUI.BUTTON_CONTEXT_MENU];__t1[__t2.BUTTON_RMENU]=[FUI.BUTTON_CONTEXT_MENU];__t1[__t2.BUTTON_OEM_CLEAR]=[FUI.BUTTON_CLEAR];__t1[__t2.BUTTON_OEM_PLUS]=[FUI.BUTTON_PLUS_SIGN];__t1[__t2.BUTTON_OEM_COMMA]=[FUI.BUTTON_COMMA];__t1[__t2.BUTTON_OEM_MINUS]=[FUI.BUTTON_HYPHEN_MINUS];
__t1[__t2.BUTTON_OEM_PERIOD]=[FUI.BUTTON_PERIOD];__t1[__t2.BUTTON_OEM_1]=[FUI.BUTTON_SEMICOLON];__t1[__t2.BUTTON_OEM_2]=[FUI.BUTTON_SOLIDUS];__t1[__t2.BUTTON_OEM_3]=[FUI.BUTTON_GRAVE_ACCENT];__t1[__t2.BUTTON_OEM_4]=[FUI.BUTTON_LEFT_SQUARE_BRACKET];__t1[__t2.BUTTON_OEM_5]=[FUI.BUTTON_REVERSE_SOLIDUS];__t1[__t2.BUTTON_OEM_6]=[FUI.BUTTON_RIGHT_SQUARE_BRACKET];__t1[__t2.BUTTON_OEM_7]=[FUI.BUTTON_APOSTROPHE];__t1[59]=[FUI.BUTTON_SEMICOLON];__t1[61]=[FUI.BUTTON_EQUALS_SIGN];__t1[173]=[FUI.BUTTON_HYPHEN_MINUS];
__t1.Alt=[FUI.BUTTON_ALT];__t1.Control=[FUI.BUTTON_CONTROL];__t1.Shift=[FUI.BUTTON_SHIFT];__t1.CapsLock=[FUI.BUTTON_CAPS_LOCK];__t1.Win=[FUI.BUTTON_OS];__t1.Clear=[FUI.BUTTON_CLEAR];__t1.Down=[FUI.BUTTON_ARROW_DOWN];__t1.End=[FUI.BUTTON_END];__t1.Enter=[FUI.BUTTON_ENTER];__t1.Execute=[FUI.BUTTON_EXECUTE];__t1.F1=[FUI.BUTTON_F1];__t1.F2=[FUI.BUTTON_F2];__t1.F3=[FUI.BUTTON_F3];__t1.F4=[FUI.BUTTON_F4];__t1.F5=[FUI.BUTTON_F5];__t1.F6=[FUI.BUTTON_F6];__t1.F7=[FUI.BUTTON_F7];__t1.F8=[FUI.BUTTON_F8];
__t1.F9=[FUI.BUTTON_F9];__t1.F10=[FUI.BUTTON_F10];__t1.F11=[FUI.BUTTON_F11];__t1.F12=[FUI.BUTTON_F12];__t1.F13=[FUI.BUTTON_F13];__t1.F14=[FUI.BUTTON_F14];__t1.F15=[FUI.BUTTON_F15];__t1.F16=[FUI.BUTTON_F16];__t1.F17=[FUI.BUTTON_F17];__t1.F18=[FUI.BUTTON_F18];__t1.F19=[FUI.BUTTON_F19];__t1.F20=[FUI.BUTTON_F20];__t1.F21=[FUI.BUTTON_F21];__t1.F22=[FUI.BUTTON_F22];__t1.F23=[FUI.BUTTON_F23];__t1.F24=[FUI.BUTTON_F24];__t1.Help=[FUI.BUTTON_HELP];__t1.Home=[FUI.BUTTON_HOME];__t1.Insert=[FUI.BUTTON_INSERT];
__t1.Left=[FUI.BUTTON_ARROW_LEFT];__t1.PageDown=[FUI.BUTTON_PAGE_DOWN];__t1.PageUp=[FUI.BUTTON_PAGE_UP];__t1.Pause=[FUI.BUTTON_PAUSE_BREAK];__t1.PrintScreen=[FUI.BUTTON_PRINT_SCREEN];__t1.Right=[FUI.BUTTON_ARROW_RIGHT];__t1.Scroll=[FUI.BUTTON_SCROLL_LOCK];__t1.Select=[FUI.BUTTON_SELECT];__t1.Up=[FUI.BUTTON_ARROW_UP];window.__t1_ORIG?(__t1=window.__t1_ORIG,delete window.__t1_ORIG):__t1=void 0;window.__t2_ORIG?(__t2=window.__t2_ORIG,delete window.__t2_ORIG):__t2=void 0;FUI.driver.browser=function(){};FUI.driver.browser.prototype={constructor:FUI.driver.browser,mouse:function(){},keyboard:function(){},touches:function(){}};
FUI.driver.browser.prototype.mouse=function(a){var b={};b.timestamp=a.timestamp||Date.now();b.pointers={};b.pointers.mouse={x:a.clientX,y:a.clientY};b[FUI.BUTTON_CONTROL]=a.ctrlKey;b[FUI.BUTTON_ALT]=a.altKey;b[FUI.BUTTON_SHIFT]=a.shiftKey;b[FUI.BUTTON_META]=a.metaKey;b.pointers.mouse.buttons={};if("mouseup"==a.type||"mousedown"==a.type){var c="mouseup"==a.type?!1:!0,d=a.button;void 0==d&&(d=a.which-1);switch(d){case 0:b.pointers.mouse.buttons[FUI.BUTTON_POINTER_LEFT]=c;break;case 1:b.pointers.mouse.buttons[FUI.BUTTON_POINTER_MIDDLE]=
c;break;case 2:b.pointers.mouse.buttons[FUI.BUTTON_POINTER_RIGHT]=c;break;default:FUI.debug.error(10,["incorrect button (0,1,2||3):",d,a.button,a.which])}DEBUG&&FUI.debug.log(2,["setting data.pointers.mouse.buttons",b.pointers.mouse.buttons])}return b};
FUI.driver.browser.prototype.keyboard=function(a){var a=a||{},b=a.keyCode||a.which,c=null,c=FUI.driver.keyboard.prototype.buttonTable[b]?FUI.driver.keyboard.prototype.buttonTable[b]:b;c[0]&&(c=c[0]);return{buttonCode:c,timestamp:a.timestamp||a.timeStamp,rawEventData:a}};FUI.driver.browser.prototype.keyboard_postProcess=function(a){if(!a.location){var b=FUI.MASK_LOCATION&a.buttonCode;if(b)a.location=b}a.buttonHash=a.buttonCode|(a.location||0);return a};FUI.drivers.browser.defaultDriver=new FUI.driver.browser;FUI.drivers.browser.firefox=new FUI.driver.browser;FUI.drivers.browser.firefox.data={};
FUI.drivers.browser.firefox.mouse=function(a){var b=FUI.driver.browser.prototype.mouse(a);b.pointers.mouse.dz=b.pointers.mouse.dz||0;if("DOMMouseScroll"==a.type)b.pointers.mouse.dz=-1*Math.max(-1,Math.min(1,a.wheelDelta||-a.detail));if(a.mozInputSource)b.pointers.mouse.source=a.mozInputSource==a.MOZ_SOURCE_MOUSE?FUI.POINTER_SOURCE_MOUSE:a.mozInputSource==a.MOZ_SOURCE_PEN?FUI.POINTER_SOURCE_PEN:a.mozInputSource==a.MOZ_SOURCE_ERASER?FUI.POINTER_SOURCE_ERASER:a.mozInputSource==a.MOZ_SOURCE_CURSOR?FUI.POINTER_SOURCE_CURSOR:
a.mozInputSource==a.MOZ_SOURCE_TOUCH?FUI.POINTER_SOURCE_TOUCH:a.mozInputSource==a.MOZ_SOURCE_KEYBOARD?FUI.POINTER_SOURCE_KEYBOARD:FUI.POINTER_SOURCE_UNKNOWN;if(void 0!==a.mozPressure)b.pointers.mouse.pressure=a.mozPressure;return b};
FUI.drivers.browser.firefox.keyboard=function(a){var b=FUI.driver.browser.prototype.keyboard(a);if(void 0!==a.location)if(a.location==a.DOM_KEY_LOCATION_STANDARD)b.location=FUI.BUTTON_LOCATION_STANDARD;else if(a.location==a.DOM_KEY_LOCATION_NUMPAD)b.location=FUI.BUTTON_LOCATION_NUMPAD;else if(a.location==a.DOM_KEY_LOCATION_MOBILE)b.location=FUI.BUTTON_LOCATION_MOBILE;else if(a.location==a.DOM_KEY_LOCATION_LEFT)b.location=FUI.BUTTON_LOCATION_LEFT;else if(a.location==a.DOM_KEY_LOCATION_RIGHT)b.location=
FUI.BUTTON_LOCATION_RIGHT;else if(a.location==a.DOM_KEY_LOCATION_JOYSTICK)b.location=FUI.BUTTON_LOCATION_JOYSTICK;return b};FUI.drivers.browser.firefox.touches=function(a){return{rawData:a}};FUI.drivers.browser.defaultDriver=FUI.drivers.browser.firefox;FUI.adapter=function(){this.options={disableContextMenu:!0,moveTimer:250};this.state={pointers:null,buttons:null};this.__driver=null;this.__events=[];this.__lastButtonDown={}};
FUI.adapter.prototype.listenOn=function(a){DEBUG&&FUI.debug.log(1,["listenOn",a]);this.listeningElement=a||document;this.options=this.options||{};this.__driver=this.__driver||FUI.drivers.defaultDriver;this.state.pointers=this.state.pointers||{};this.state.buttons=this.state.buttons||{};var b=this;this.listeningElement.addEventListener("mousedown",function(a){b.__listener_mouse_down(a)},!1);this.listeningElement.addEventListener("mouseup",function(a){b.__listener_mouse_up(a)},!1);this.listeningElement.addEventListener("mousewheel",
function(a){b.__listener_mouse_scroll(a)},!1);this.listeningElement.addEventListener("DOMMouseScroll",function(a){b.__listener_mouse_scroll(a)},!1);document.addEventListener("keydown",function(a){b.__listener_key_down(a)},!1);document.addEventListener("keyup",function(a){b.__listener_key_up(a)},!1);this.options.disableContextMenu=this.options.disableContextMenu||!1;if(this.options.disableContextMenu)document.oncontextmenu=function(a){a&&a.stopPropagation&&a.stopPropagation();return!1};this.options.moveTimer=
this.options.moveTimer||250;return this};FUI.adapter.prototype.listenUsing=function(a){a instanceof FUI.driver.browser.prototype.constructor?(this.__driver=a,DEBUG&&FUI.debug.log(10,["is instanceof",a,FUI.driver.browser])):a&&FUI.drivers[a]?this.__driver=FUI.drivers[a]:FUI.debug.error(10,["driver not recognized: ",a]);return this};
FUI.adapter.prototype.listenFor=function(a,b){this.__events.push({gesture:a,callback:b});DEBUG&&FUI.debug.log(3,["added gesture to stack",this.__events.length,this.__events]);return this};FUI.adapter.prototype.__sendState=function(a){var b=this.state.mouse,c=this.state.keyboard,d=this.state.touches;return{pointers:[b.getPointer()].concat(d.getPointers()),buttons:c.getButtons(),hardware:{mouse:b,keyboard:c,touches:d},rawEventData:a}};
FUI.adapter.prototype.__listener_key_up=function(a){var b=this.__listener_driver(a,"keyboard"),b=FUI.driver.browser.prototype.keyboard_postProcess(b);this.__lastButtonDown[b.buttonCode]=!1;DEBUG&&FUI.debug.log(2,["listener_button_up fired",b,a]);this.updateState_buttons(b,!1);this.gestureCheck()};
FUI.adapter.prototype.__listener_key_down=function(a){var b=this.__listener_driver(a,"keyboard");!0!=this.__lastButtonDown[b.buttonCode]&&(b=FUI.driver.browser.prototype.keyboard_postProcess(b),DEBUG&&FUI.debug.log(2,["listener_button_down fired, ",b,a]),this.updateState_buttons(b,!0),this.gestureCheck(),this.__lastButtonDown[b.buttonCode]=!0)};
FUI.adapter.prototype.__listener_mouse_down=function(a){DEBUG&&FUI.debug.log(2,["listener_mouse_down fired, ",a]);this.updateState_pointers(this.__listener_driver(a,"mouse"),!0);this.gestureCheck()};FUI.adapter.prototype.__listener_mouse_up=function(a){DEBUG&&FUI.debug.log(2,["listener_mouse_up fired, ",a]);this.updateState_pointers(this.__listener_driver(a,"mouse"),!0);this.gestureCheck()};FUI.adapter.prototype.__listener_mouse_move=function(a){this.lastMoveAsync=this.__listener_driver(a,"mouse")};
FUI.adapter.prototype.__listener_mouse_move_fire=function(a){var b=this.lastMoveAsync;if(b==this.lastMoveSync)return!1;DEBUG&&FUI.debug.log(2,["listener_mouse_move_fire fired, ",a]);this.updateState_pointers(b,!0);this.gestureCheck();this.lastMoveSync=b};FUI.adapter.prototype.__listener_mouse_scroll=function(a){DEBUG&&FUI.debug.log(2,["listener_mouse_scroll fired, ",a]);this.updateState_pointers(this.__listener_driver(a,"mouse"),!0);this.gestureCheck()};
FUI.adapter.prototype.__listener_driver=function(a,b){if(this.__driver)return!b||!this.__driver[b]?(FUI.debug.error(10,["incorrect deviceType specified:",b]),!1):this.__driver[b](a);FUI.debug.error(10,["Driver "+this.__driver+" not installed!",this.__driverList]);return!1};
FUI.adapter.prototype.updateState_pointers=function(a,b){DEBUG&&FUI.debug.log(2,["updateState_pointers",a]);this.state.pointers.lastUpdate=a.timestamp;var c=null,c=b?this.state.pointers.mouse=this.state.pointers.mouse||{}:this.state.pointers[a.identifier],d;for(d in a.pointers){var e=a.pointers[d];e.dz&&(c.z+=e.dz);if(e.x)c.x=e.x;if(e.y)c.y=e.y;if(e.z)c.z=e.z;for(d in e.buttons)DEBUG&&FUI.debug.log(1,["n & FUI.MASK_BUTTON_POINTER) == FUI.MASK_BUTTON_POINTER",d+" & "+FUI.MASK_BUTTON_POINTER+") == "+
FUI.MASK_BUTTON_POINTER,(d&FUI.MASK_BUTTON_POINTER)==FUI.MASK_BUTTON_POINTER]),(d&FUI.MASK_BUTTON_POINTER)==FUI.MASK_BUTTON_POINTER?c[d]=e.buttons[d]:this.state.buttons[d]=e.buttons[d]}void 0!=a[FUI.BUTTON_CONTROL]&&(this.state.buttons[FUI.BUTTON_CONTROL]={down:a[FUI.BUTTON_CONTROL],timestamp:a.timestamp});void 0!=a[FUI.BUTTON_ALT]&&(this.state.buttons[FUI.BUTTON_ALT]={down:a[FUI.BUTTON_ALT],timestamp:a.timestamp});void 0!=a[FUI.BUTTON_SHIFT]&&(this.state.buttons[FUI.BUTTON_SHIFT]={down:a[FUI.BUTTON_SHIFT],
timestamp:a.timestamp});void 0!=a[FUI.BUTTON_META]&&(this.state.buttons[FUI.BUTTON_META]={down:a[FUI.BUTTON_META],timestamp:a.timestamp})};FUI.adapter.prototype.updateState_buttons=function(a,b){DEBUG&&FUI.debug.log(2,["updateState_buttons",a]);this.state.buttons.lastUpdate=a.timestamp;this.state.buttons[a.buttonCode]={down:b,timestamp:a.timestamp,location:a.location};DEBUG&&FUI.debug.log(1,["updateState_buttons",a,this.state.buttons])};
FUI.adapter.prototype.gestureCheck=function(){DEBUG&&FUI.debug.log(10,["gestureCheck",this.__events,this.state]);for(var a in this.__events)if(this.__events[a].gesture.evaluate){if(this.__events[a].gesture.evaluate(this.state)){var b=this.__events[a].callback();DEBUG&&FUI.debug.log(8,[a,"callback res",b])}}else FUI.debug.error(10,["unknown gesture type",this.__events[a].gesture])};
